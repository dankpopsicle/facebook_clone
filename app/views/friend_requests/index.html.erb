<h2>Friend Requests</h2>

<h3>Received Requests: </h3>

<ul>
  <% @received_requests.each do |request| %>
    <% user = User.find(request.user_id) %>

    <li><%= user.first_name %> <%= user.last_name %>
    <%= form_with(model: current_user.friendships.build, remote: true) do |f| %>
      <div><%= hidden_field_tag :friend_id, request.user_id %></div>
      <div><%= hidden_field_tag :user_id, current_user.id %></div>
      <%= f.submit "Accept Friend Request", class: "btn btn-primary" %>
    <% end %>

    <%= form_with(model: current_user.friend_requests.find_by(friend_id: request.friend_id),
                html: { method: :delete }, remote: true) do |f| %>
      <%= f.submit "Delete Friend Request", class: "btn btn-primary" %>
    <% end %>
    </li>
  <% end %>
</ul>

<h3>Sent Requests: </h3>
  <% @sent_requests.each do |request| %>
    <% user = User.find(request.friend_id) %>
    <li><%= user.first_name %> <%= user.last_name %>
    
    <%= form_with(model: current_user.friend_requests.find_by(friend_id: request.friend_id),
                html: { method: :delete }, remote: true) do |f| %>
      <%= f.submit "Delete Friend Request", class: "btn btn-primary" %>
    <% end %>
    </li>
  <% end %>
</h3>